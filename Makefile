###############################################################################
# globals
###############################################################################
CFLAGS =	-Wall -fPIC -O2 -D_GNU_SOURCE -fvisibility=hidden -Wno-psabi
LDFLAGS =	-Wl,-E
DEBUGFLAGS =
LDSOFLAGS =	-shared -rdynamic
CROSS_COMPILE =
COMPILER =	$(CROSS_COMPILE)$(CC)
LINKER =	$(CROSS_COMPILE)$(CC)

###############################################################################
# bbusd
###############################################################################
BBUSD_OBJS =	bbusd.o
BBUSD_TARGET =	bbusd

$(BBUSD_TARGET):	$(BBUSD_OBJS)
	$(LINKER) -o $(BBUSD_TARGET) $(BBUSD_OBJS) $(LDFLAGS) $(DEBUGFLAGS)

###############################################################################
# all
###############################################################################
all:		bbusd

###############################################################################
# clean
###############################################################################
clean:
	rm -f $(BBUSD_OBJS)
	rm -f $(BBUSD_TARGET)

###############################################################################
# other
###############################################################################

.PRECIOUS:	%.c
.SUFFIXES:
.SUFFIXES:	.o .c
.PHONY:		all

.c.o:
	$(COMPILER) -c -o $*.o $(CFLAGS) $(DEBUGFLAGS) $*.c
